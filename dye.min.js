const checkColor=(e,t=!1,r={})=>{let l,o,a,n;if(e.startsWith("rgb("))return splittedColor=e.substr(4,e.length-5).split(", "),l=splittedColor[0],o=splittedColor[1],a=splittedColor[2],n=Math.round((299*parseInt(l)+587*parseInt(o)+114*parseInt(a))/1e3),t?imgFilter=r.blackimg?125<n?"":"grayscale(1) invert(1)":125<n?"grayscale(1) invert(1)":"":textColor=125<n?"rgb(0,0,0)":"rgb(255,255,255)";e.includes("rgba(0, 0, 0, 0)")&&console.log("Element does not have a background color.")},getParentBG=(e,t=!1)=>{let r;var l=e=>{return window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("background-color"):e.style.backgroundColor};return r=t?l(document.querySelector(t)):l(e),r},dye=()=>{document.querySelectorAll("[dye]").forEach(t=>{let e=t.attributes.dye.value,r;if("self"===e||""===e){let e;"IMG"!==t.tagName&&(e=getParentBG(t),r=checkColor(e)),"IMG"===t.tagName&&(r=checkColor(getParentBG(t.parentElement),!0,t.attributes),t.style.filter=r,t.style.webkitFilter=r),"rgba(0, 0, 0, 0)"===e&&(e=getParentBG(t.parentElement),r=checkColor(e))}else"IMG"===t.tagName?(r=checkColor(getParentBG(null,e),!0),t.style.filter=r,t.style.webkitFilter=r):(bg=getParentBG(null,e),r=checkColor(bg));t.style.color=r})};dye();